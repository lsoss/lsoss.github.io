
p: &p {type: http, interval: 3600, health-check: {enable: true, url: https://google.tw/, interval: 1800}}

mode: rule
ipv6: true
log-level: info
allow-lan: true
mixed-port: 7890
unified-delay: false
tcp-concurrent: true
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  nameserver-policy:
   'google, geosite:geolocation-!cn, MATCH': [https://8.8.8.8/dns-query,https://1.0.0.1/dns-query]
   'DIRECT,GEOSITE,CN': [https://223.5.5.5/dns-query,https://1.12.12.12/dns-query]


proxies:
- name: "Warp-a"
  type: wireguard
  server: 162.159.195.125
  port: 4177
  ip: 172.16.0.2/32
  public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
  private-key: oLZLKQytWyy0GwGdODaM9oSiLY6TQ3lLkX0RMEsA0Wc=
  allowed-ips: ['0.0.0.0/0']
  udp: true
  mtu: 1208

- name: "Warp-b"
  type: wireguard
  server: 162.159.192.236
  port: 7103
  ip: 172.16.0.2/32
  public-key: bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=
  private-key: GFXkbjI9CYsLViOBVaV3PacT+ZNsf5CNgQnNSFuDFnc=
  allowed-ips: ['0.0.0.0/0']
  udp: true
  mtu: 1208

proxy-groups:
 - {name: Proxy, type: select, proxies: [Warp]}
 - {name: Warp, type: url-test, tolerance: 100, lazy: true, proxies: [Warp-a, Warp-b]}

rules:
  - IP-CIDR,194.1.0.0/16,DIRECT
  - GEOSITE,google,Proxy
  - DOMAIN-KEYWORD,bing,DIRECT
  - GEOSITE,geolocation-!cn,Proxy 
  - GEOSITE,CN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
